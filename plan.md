### 项目开发任务规划

| 任务ID | 任务名称 | 任务描述 | 负责人 | 预估工时 | 前置任务 | 优先级 | 当前状态 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **阶段一: 环境与基础架构** |
| 1 | 环境搭建与依赖安装 | 安装 Go 1.25、Protobuf v32.1 编译器，并使用 Go Modules 安装 Zinx v1.0 框架。确保所有开发工具链版本一致且可用，为后续开发奠定基础。 | | 4 | | 高 | 待开始 |
| 2 | 初始化项目结构 | 创建项目目录，初始化 Go Modules，并按照 `arch.md` 中建议的最佳实践建立 `conf`, `proto`, `routers`, `handlers`, `utils` 等子目录。 | | 2 | 1 | 高 | 待开始 |
| 3 | 基础 Zinx 服务器实现 | 编写 `main.go` 入口文件，创建一个基础的 Zinx TCP 服务器实例。配置服务器名称、IP、端口，并实现基础的启动和停止逻辑。 | | 4 | 2 | 高 | 待开始 |
| **阶段二: 核心业务功能开发** |
| 4 | 定义 Protobuf 消息契约 | 在 `proto/messages.proto` 文件中定义所有服务间通信的 Protobuf 消息结构，包括通用请求/响应、用户认证和消息推送等，并生成 Go 代码。 | | 6 | 2 | 高 | 待开始 |
| 5 | 实现用户认证业务逻辑 | 在 `handlers` 目录下实现用户认证的具体逻辑。包括解析 `AuthRequest`，验证用户名和密码，生成并返回包含 Token 的 `AuthResponse`。 | | 8 | 4 | 高 | 待开始 |
| 6 | 实现消息推送业务逻辑 | 在 `handlers` 目录下实现消息推送的具体逻辑。包括解析 `PushRequest`，根据 `target_user` 推送内容，并返回 `PushResponse` 确认状态。 | | 8 | 4 | 高 | 待开始 |
| 7 | 实现 Zinx 消息路由 | 在 `routers` 目录下创建并注册与业务逻辑对应的路由模块。将用户认证（MsgID=1）和消息推送（MsgID=2）的请求精确分发到对应的 Handler 进行处理。 | | 4 | 5, 6 | 高 | 待开始 |
| **阶段三: 可观测性与路由增强** |
| 8 | 实现增强型路由与中间件 | 根据 `irouter.md` 设计，封装一个支持中间件（洋葱模型）的 EnhancedRouter，用于解耦路由和横切关注点，如日志、监控和追踪。 | | 12 | 7 | 中 | 待开始 |
| 9 | 集成 Prometheus 指标监控 | 实现一个 Prometheus 中间件，自动收集请求总数、处理耗时、错误率等关键指标。同时，启动一个独立的 HTTP 服务暴露 `/metrics` 端点。 | | 8 | 8 | 中 | 待开始 |
| 10 | 集成 OpenTelemetry 链路追踪 | 实现一个 OpenTelemetry 中间件，为每个请求创建和管理分布式链路追踪的 Span。支持通过 OTLP 协议将追踪数据上报到收集器。 | | 10 | 8 | 中 | 待开始 |
| 11 | 实现配置热加载功能 | 实现基于 `fsnotify` 的 YAML 配置文件热加载机制，允许在不重启服务的情况下动态更新 OTLP 采样率、日志级别等可调参数。 | | 8 | 8 | 低 | 待开始 |
| **阶段四: 安全、优化与部署** |
| 12 | 实现 TLS 加密通信 | 为 Zinx 服务器启用 TLS，生成自签名证书用于开发测试，确保客户端与服务器之间的通信是加密的，防止数据在传输过程中被窃听。 | | 6 | 3 | 中 | 待开始 |
| 13 | 集成 JWT 进行身份验证 | 在消息路由或中间件层增加 JWT Token 验证逻辑，确保所有需要授权的接口都能正确校验客户端身份，拒绝未授权的访问。 | | 8 | 5 | 高 | 待开始 |
| 14 | 创建 Dockerfile 实现容器化 | 编写 Dockerfile，将 Go 应用程序、配置文件和静态资源打包成一个独立的、可移植的 Docker 镜像，为后续在生产环境中部署做准备。 | | 4 | 13 | 高 | 待开始 |
| 15 | 编写 K8s 部署清单 | 编写 Kubernetes Deployment 和 Service 的 YAML 清单文件，定义应用的副本数量、资源限制和负载均衡策略，以实现服务的高可用性。 | | 6 | 14 | 中 | 待开始 |
